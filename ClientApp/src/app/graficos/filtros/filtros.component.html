<form class="content-container" #form="ngForm" (ngSubmit)="submitForm(form)">
  <div class="date-picker-container" (click)="picker.open()">
    <label>Seleccione el rango de fechas de los datos que desea graficar</label>
    <mat-date-range-input [rangePicker]="picker">
      <input
        required
        ngModel
        name="startDate"
        matStartDate
        placeholder="Fecha Inicial"
      />
      <input
        required
        ngModel
        name="endDate"
        matEndDate
        placeholder="Fecha Final"
      />
    </mat-date-range-input>
    <mat-date-range-picker #picker></mat-date-range-picker>
  </div>
  <div class="grafico-radio-buttons">
    <label>Seleccione el gráfico que desea observar</label>

    <div class="form-grid">
      <mat-checkbox
        (change)="dataSetChange($event.source.value)"
        value="incidente"
        >Incidente
      </mat-checkbox>

      <mat-checkbox
        (change)="dataSetChange($event.source.value)"
        value="casi-incidente"
        >Casi incidente
      </mat-checkbox>

      <mat-checkbox (change)="dataSetChange($event.source.value)" value="bbs"
        >BBS
      </mat-checkbox>

      <mat-checkbox
        (change)="dataSetChange($event.source.value)"
        value="condiciones-inseguras"
        >Condiciones inseguras
      </mat-checkbox>
    </div>
  </div>

  <label>Seleccione las variables que desea observar en el gráfico:</label>
  <mat-radio-group ngModel name="propiedad" required>
    <mat-radio-button value="area-de-trabajo"
      >Área de Trabajo
    </mat-radio-button>

    <mat-radio-button value="dia">Día </mat-radio-button>
    <mat-radio-button value="mes">Mes </mat-radio-button>
    <mat-radio-button value="semana">Semana </mat-radio-button>
    <!--    <mat-radio-button-->
    <!--      *ngIf="-->
    <!--        (isSelected('incidente') || isSelected('casi-incidente')) &&-->
    <!--        !(isSelected('bbs') || isSelected('condiciones-inseguras'))-->
    <!--      "-->
    <!--      >Porcentaje de Jornada-->
    <!--    </mat-radio-button>-->
    <mat-radio-button
      value="Proceso"
      *ngIf="
        (isSelected('incidente') ||
          isSelected('casi-incidente') ||
          isSelected('bbs')) &&
        !isSelected('condiciones-inseguras')
      "
      >Proceso
    </mat-radio-button>
    <mat-radio-button
      value="nivel-de-riesgo"
      *ngIf="
        (isSelected('incidente') || isSelected('casi-incidente')) &&
        !(isSelected('bbs') || isSelected('condiciones-inseguras'))
      "
      >Nivel de Riesgo
    </mat-radio-button>

    <mat-radio-button
      value="genero"
      *ngIf="
        (isSelected('incidente') || isSelected('casi-incidente')) &&
        !(isSelected('bbs') || isSelected('condiciones-inseguras'))
      "
      >Género
    </mat-radio-button>
    <mat-radio-button
      value="tipo-de-efecto"
      *ngIf="
        isSelected('incidente') &&
        !(
          isSelected('bbs') ||
          isSelected('condiciones-inseguras') ||
          isSelected('casi-incidente')
        )
      "
      >Tipo de efecto
    </mat-radio-button>
    <mat-radio-button
      value="clasificacion"
      *ngIf="
        isSelected('incidente') &&
        !(
          isSelected('bbs') ||
          isSelected('condiciones-inseguras') ||
          isSelected('casi-incidente')
        )
      "
      >Clasificación
    </mat-radio-button>
    <mat-radio-button
      value="turno"
      *ngIf="
        (isSelected('incidente') || isSelected('casi-incidente')) &&
        !(isSelected('bbs') || isSelected('condiciones-inseguras'))
      "
      >Turno
    </mat-radio-button>
    <mat-radio-button
      *ngIf="
        isSelected('incidente') &&
        !(
          isSelected('bbs') ||
          isSelected('condiciones-inseguras') ||
          isSelected('casi-incidente')
        )
      "
      value="parte-afectada"
      >Parte afectada
    </mat-radio-button>
    <mat-radio-button
      *ngIf="
        isSelected('incidente') &&
        !(
          isSelected('bbs') ||
          isSelected('condiciones-inseguras') ||
          isSelected('casi-incidente')
        )
      "
      value="causa-basica"
      >Causa básica
    </mat-radio-button>
    <mat-radio-button
      *ngIf="
        isSelected('bbs') &&
        !(
          isSelected('incidente') ||
          isSelected('condiciones-inseguras') ||
          isSelected('casi-incidente')
        )
      "
      value="comportamiento-detectado"
      >Comportamiento detectado
    </mat-radio-button>
    <mat-radio-button
      *ngIf="
        isSelected('bbs') &&
        !(
          isSelected('incidente') ||
          isSelected('condiciones-inseguras') ||
          isSelected('casi-incidente')
        )
      "
      value="tipo-observado"
      >Tipo observado
    </mat-radio-button>
    <mat-radio-button
      *ngIf="
        isSelected('bbs') &&
        !(
          isSelected('incidente') ||
          isSelected('condiciones-inseguras') ||
          isSelected('casi-incidente')
        )
      "
      value="comportamiento"
      >Comportamiento
    </mat-radio-button>
    <mat-radio-button
      *ngIf="
        isSelected('incidente') &&
        !(
          isSelected('bbs') ||
          isSelected('condiciones-inseguras') ||
          isSelected('casi-incidente')
        )
      "
      k
      value="causa-inmediata"
      >Causa inmediata
    </mat-radio-button>
    <mat-radio-button
      *ngIf="
        isSelected('condiciones-inseguras') &&
        !(
          isSelected('bbs') ||
          isSelected('incidente') ||
          isSelected('casi-incidente')
        )
      "
      value="indicador-de-riesgo"
      >Indicador de Riesgo
    </mat-radio-button>
    <mat-radio-button
      *ngIf="
        isSelected('condiciones-inseguras') &&
        !(
          isSelected('bbs') ||
          isSelected('incidente') ||
          isSelected('casi-incidente')
        )
      "
      value="categoria"
      >Categoria
    </mat-radio-button>
    <mat-radio-button
      *ngIf="
        isSelected('condiciones-inseguras') &&
        !(
          isSelected('bbs') ||
          isSelected('incidente') ||
          isSelected('casi-incidente')
        )
      "
      value="subcategoria"
      >Subcategoria
    </mat-radio-button>
    <mat-radio-button
      *ngIf="
        isSelected('condiciones-inseguras') &&
        !(
          isSelected('bbs') ||
          isSelected('incidente') ||
          isSelected('casi-incidente')
        )
      "
      value="exposicion"
      >Exposición
    </mat-radio-button>
    <mat-radio-button
      *ngIf="
        isSelected('condiciones-inseguras') &&
        !(
          isSelected('bbs') ||
          isSelected('incidente') ||
          isSelected('casi-incidente')
        )
      "
      value="probabilidad"
      >Probabilidad
    </mat-radio-button>
    <mat-radio-button
      *ngIf="
        isSelected('condiciones-inseguras') &&
        !(
          isSelected('bbs') ||
          isSelected('incidente') ||
          isSelected('casi-incidente')
        )
      "
      value="valor-riesgo"
      >Valor de Riesgo
    </mat-radio-button>
    <mat-radio-button
      *ngIf="
        isSelected('condiciones-inseguras') &&
        !(
          isSelected('bbs') ||
          isSelected('incidente') ||
          isSelected('casi-incidente')
        )
      "
      value="consecuencia"
      >Consecuencia
    </mat-radio-button>
    <mat-radio-button
      *ngIf="
        isSelected('condiciones-inseguras') &&
        !(
          isSelected('bbs') ||
          isSelected('incidente') ||
          isSelected('casi-incidente')
        )
      "
      value="nivel-riesgo"
      >Nivel de Riesgo
    </mat-radio-button>
    <mat-radio-button
      *ngIf="
        isSelected('condiciones-inseguras') &&
        !(
          isSelected('bbs') ||
          isSelected('incidente') ||
          isSelected('casi-incidente')
        )
      "
      value="prioridad-atencion"
      >Prioridad de Atención
    </mat-radio-button>
    <mat-radio-button
      *ngIf="
        isSelected('condiciones-inseguras') &&
        !(
          isSelected('bbs') ||
          isSelected('incidente') ||
          isSelected('casi-incidente')
        )
      "
      value="estatus-cierre"
      >Estatus de Cierre
    </mat-radio-button>
    <mat-radio-button
      *ngIf="
        isSelected('condiciones-inseguras') &&
        !(
          isSelected('bbs') ||
          isSelected('incidente') ||
          isSelected('casi-incidente')
        )
      "
      value="responsable"
      >Responsable
    </mat-radio-button>
  </mat-radio-group>
  <div class="button-group">
    <span class="invalid-message">{{ errorMessage }}</span>
    <button class="save-button">VER GRÁFICO</button>
  </div>
</form>
